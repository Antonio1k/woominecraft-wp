window.WooMinecraft=function(e,n,o){var r={};return r.l10n=woominecraft||{},r.cache=function(){r.$body=o("body"),r.$nonce=r.$body.find("#woo_minecraft_nonce"),r.$resend_donations=r.$body.find("#resendDonations")},r.init=function(){r.cache(),r.$body.on("click",".woo_minecraft_reset",r.reset_form),r.$body.on("click",".button.wmc_add_server",r.add_server),r.$body.on("click",".button.wmc_delete_server",r.remove_server),r.l10n.player_id?r.$resend_donations.on("click",r.resend_donations):r.$resend_donations.prop("disabled",!0)},r.add_server=function(e){e.preventDefault();var n=o(".woominecraft tbody tr:first");if(!n)return!1;var t=n.clone();t.find(":text").val(""),n.parent("tbody").append(t),r.reindex_rows()},r.remove_server=function(e){return e.preventDefault(),0==o(".woominecraft tbody tr").length-1?(alert(r.l10n.must_have_single),!1):void o(this).closest("tr.row").fadeOut(200,function(){o(this).remove(),r.reindex_rows()})},r.reindex_rows=function(){var e=o(".woominecraft tbody tr");return!!e&&void e.each(function(e){o(this).find(":text").each(function(){var n=o(this).attr("name");n=n.replace(/\[([0-9]+)\]/,"["+e+"]"),o(this).attr("name",n)}),o(this).find("select").each(function(){var n=o(this).attr("name");n=n.replace(/\[([0-9]+)\]/,"["+e+"]"),o(this).attr("name",n)})})},r.resend_donations=function(e){e.preventDefault();var n=o("select.wmc-server-select");return!(!n||""==n.val())&&(r.$resend_donations.prop("disabled",!0),void o.ajax({url:ajaxurl,data:{action:"wmc_resend_donations",order_id:r.l10n.order_id,player_id:r.l10n.player_id,server:n.val()},dataType:"json",method:"POST"}).done(r.xhrDone))},r.xhrDone=function(e,n,o){e.success&&alert(r.l10n.donations_resent),r.$resend_donations.prop("disabled",!1)},r.reset_form=function(e){e.preventDefault();var n=confirm(r.l10n.confirm);n&&o(this).closest(".form-fields").find("span").not(".woo_minecraft_copyme, .woocommerce-help-tip").fadeOut(200,function(){o(this).remove(),o("#variable_product_options .woocommerce_variations :input").trigger("change")})},r.log=function(){r.l10n.script_debug&&e.console&&e.console.log(Array.prototype.slice.call(arguments))},o(n).ready(r.init),r}(window,document,jQuery);