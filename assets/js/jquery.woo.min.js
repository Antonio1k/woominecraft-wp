window.WooMinecraft=function(e,o,n){var t={};return t.l10n=woominecraft||{},t.cache=function(){t.$body=n("body"),t.$nonce=t.$body.find("#woo_minecraft_nonce"),t.$resend_donations=t.$body.find("#resendDonations")},t.init=function(){t.cache(),t.$body.on("click",".woo_minecraft_add",t.add_command),t.$body.on("click",".remove_row",t.remove_command),t.$body.on("click",".woo_minecraft_reset",t.reset_form),t.$body.on("click",".button.wmc_add_server",t.add_server),t.$body.on("click",".button.wmc_delete_server",t.remove_server),t.l10n.player_id?t.$resend_donations.on("click",t.resend_donations):t.$resend_donations.prop("disabled",!0)},t.add_server=function(e){e.preventDefault();var o=n(".woominecraft tbody tr:first");if(!o)return!1;var r=o.clone();r.find(":text").val(""),o.parent("tbody").append(r),t.reindex_rows()},t.remove_server=function(e){return e.preventDefault(),0==n(".woominecraft tbody tr").length-1?(alert("You must have at least one server listed."),!1):void n(this).closest("tr.row").fadeOut(200,function(){n(this).remove(),t.reindex_rows()})},t.reindex_rows=function(){var e=n(".woominecraft tbody tr");return!!e&&void e.each(function(e){n(this).find(":text").each(function(){var o=n(this).attr("name");o=o.replace(/\[([0-9]+)\]/,"["+e+"]"),n(this).attr("name",o)})})},t.resend_donations=function(e){e.preventDefault(),t.$resend_donations.prop("disabled",!0),n.ajax({url:ajaxurl,data:{action:"wmc_resend_donations",order_id:t.l10n.order_id,player_id:t.l10n.player_id},dataType:"json",method:"POST"}).done(t.xhrDone)},t.xhrDone=function(e,o,n){e.success&&alert(t.l10n.donations_resent),t.$resend_donations.prop("disabled",!1)},t.add_command=function(e){e.preventDefault();var o=n(this).closest(".form-fields"),t=o.find(".woo_minecraft_copyme").clone().removeClass("woo_minecraft_copyme").removeAttr("style");o.append(t)},t.remove_command=function(e){e.preventDefault(),n(this).parent("span").fadeOut(200,function(e){n(this).remove()})},t.reset_form=function(e){e.preventDefault();var o=confirm(t.l10n.confirm);o&&n(this).closest(".form-fields").find("span").not(".woo_minecraft_copyme, .woocommerce-help-tip").fadeOut(200,function(){n(this).remove(),n("#variable_product_options .woocommerce_variations :input").trigger("change")})},t.log=function(){t.l10n.script_debug&&e.console&&e.console.log(Array.prototype.slice.call(arguments))},n(o).ready(t.init),t}(window,document,jQuery);