window.WooMinecraft=function(e,n,o){var t={};return t.l10n=woominecraft||{},t.cache=function(){t.$body=o("body"),t.$nonce=t.$body.find("#woo_minecraft_nonce"),t.$resend_donations=t.$body.find("#resendDonations")},t.init=function(){t.cache(),t.$body.on("click",".woo_minecraft_reset",t.reset_form),t.$body.on("click",".button.wmc_add_server",t.add_server),t.$body.on("click",".button.wmc_delete_server",t.remove_server),t.l10n.player_id?t.$resend_donations.on("click",t.resend_donations):t.$resend_donations.prop("disabled",!0)},t.add_server=function(e){e.preventDefault();var n=o(".woominecraft tbody tr:first");if(!n)return!1;var r=n.clone();r.find(":text").val(""),n.parent("tbody").append(r),t.reindex_rows()},t.remove_server=function(e){return e.preventDefault(),0==o(".woominecraft tbody tr").length-1?(alert(t.l10n.must_have_single),!1):void o(this).closest("tr.row").fadeOut(200,function(){o(this).remove(),t.reindex_rows()})},t.reindex_rows=function(){var e=o(".woominecraft tbody tr");return!!e&&void e.each(function(e){o(this).find(":text").each(function(){var n=o(this).attr("name");n=n.replace(/\[([0-9]+)\]/,"["+e+"]"),o(this).attr("name",n)}),o(this).find("select").each(function(){var n=o(this).attr("name");n=n.replace(/\[([0-9]+)\]/,"["+e+"]"),o(this).attr("name",n)})})},t.resend_donations=function(e){e.preventDefault(),t.$resend_donations.prop("disabled",!0),o.ajax({url:ajaxurl,data:{action:"wmc_resend_donations",order_id:t.l10n.order_id,player_id:t.l10n.player_id},dataType:"json",method:"POST"}).done(t.xhrDone)},t.xhrDone=function(e,n,o){e.success&&alert(t.l10n.donations_resent),t.$resend_donations.prop("disabled",!1)},t.reset_form=function(e){e.preventDefault();var n=confirm(t.l10n.confirm);n&&o(this).closest(".form-fields").find("span").not(".woo_minecraft_copyme, .woocommerce-help-tip").fadeOut(200,function(){o(this).remove(),o("#variable_product_options .woocommerce_variations :input").trigger("change")})},t.log=function(){t.l10n.script_debug&&e.console&&e.console.log(Array.prototype.slice.call(arguments))},o(n).ready(t.init),t}(window,document,jQuery);